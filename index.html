<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Jaineel Patel ‚Äî quantitative projects and interactive Python demos." />
  <title>Jaineel Patel ‚Äî Portfolio</title>

  <!-- Code editor -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/dracula.min.css" />

  <style>
    :root{
      --bg: #f6f7fb;
      --bg2:#eef2ff;
      --text:#0f172a;
      --muted:#475569;
      --muted2:#64748b;

      --card:#ffffff;
      --border:#e2e8f0;
      --shadow: 0 18px 50px rgba(2,6,23,.08);

      --accent:#2563eb;
      --accent2:#0ea5e9;
      --accent3:#10b981;

      --radius: 18px;
      --radius2: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 8% 8%, rgba(37,99,235,.10), transparent 60%),
        radial-gradient(900px 560px at 92% 18%, rgba(14,165,233,.10), transparent 60%),
        radial-gradient(800px 520px at 50% 92%, rgba(16,185,129,.07), transparent 60%),
        linear-gradient(180deg, var(--bg), #ffffff);
      line-height:1.55;
      overflow-x:hidden;
    }

    a{color:inherit}
    .container{max-width:1120px; margin:0 auto; padding:22px}

    .nav{
      position:sticky; top:0; z-index:50;
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(14px);
      border-bottom:1px solid var(--border);
    }
    .nav-inner{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px;
      padding:12px 18px;
      max-width:1120px; margin:0 auto;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      text-decoration:none;
      font-weight:800;
      letter-spacing:.2px;
    }
    .brand-dot{
      width:12px; height:12px; border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2), var(--accent3));
      box-shadow: 0 0 0 8px rgba(37,99,235,.10);
    }
    .nav-links{display:flex; gap:8px; flex-wrap:wrap}
    .nav-links a{
      text-decoration:none;
      color:var(--muted);
      padding:8px 10px;
      border-radius:12px;
      border:1px solid transparent;
      transition:all .16s ease;
      font-size:14px;
    }
    .nav-links a:hover{
      color:var(--text);
      border-color: var(--border);
      background: rgba(2,6,23,.03);
    }

    section{padding:14px 0}
    .card{
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
    }
    .card-pad{padding:22px}

    .section-title{
      display:flex; align-items:baseline; justify-content:space-between;
      gap:12px; margin:16px 0 10px;
    }
    .section-title h2{margin:0; font-size:18px; letter-spacing:.2px}
    .section-title p{margin:0; color:var(--muted); font-size:13.5px}

    .hero{padding:26px 0 6px}
    .hero-grid{
      display:grid; gap:14px;
      grid-template-columns: 1.25fr .75fr;
      align-items:stretch;
    }
    @media (max-width: 940px){ .hero-grid{grid-template-columns:1fr} }

    h1{
      margin:0 0 8px;
      font-size:42px;
      line-height:1.05;
      letter-spacing:-.6px;
    }
    @media (max-width: 560px){ h1{font-size:34px} }

    .subhead{
      margin:0 0 14px;
      color:var(--muted);
      font-size:15px;
      max-width: 72ch;
    }

    .chiprow{display:flex; flex-wrap:wrap; gap:8px; margin-top:12px}
    .chip{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(2,6,23,.02);
      color: var(--muted);
    }

    .btns{display:flex; flex-wrap:wrap; gap:10px; margin-top:14px}
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      text-decoration:none;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: #fff;
      color:var(--text);
      transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease;
      font-size:14px;
      cursor:pointer;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px); border-color:#cbd5e1; box-shadow: 0 14px 36px rgba(2,6,23,.08);}
    .btn.primary{
      border-color: rgba(37,99,235,.35);
      background: linear-gradient(135deg, rgba(37,99,235,.12), rgba(14,165,233,.10));
    }
    .btn[disabled]{opacity:.55; cursor:not-allowed; transform:none}

    .summary-box{
      border-radius:18px;
      border:1px solid var(--border);
      background: rgba(2,6,23,.02);
      padding:14px;
      color:var(--muted);
      font-size:13.5px;
    }

    .lab{display:grid; grid-template-columns:1fr; gap:12px;}
    .lab-top{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
    }
    .status{color:var(--muted); font-size:13px}

    .select{
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: #fff;
      min-width: 320px;
      outline:none;
      color: var(--text);
      font: inherit;
    }
    select option{
      color: #0f172a !important;
      background: #ffffff !important;
    }

    .lab-subbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid var(--border);
      background: rgba(2,6,23,.02);
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: #fff;
      color: var(--muted);
      font-size: 12px;
    }

    .cm-wrap{
      border-radius:18px;
      border:1px solid var(--border);
      overflow:hidden;
      background: #0b1220;
    }
    .CodeMirror{
      height: 420px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size: 13.5px;
      line-height: 1.55;
    }

    .console{
      width:100%;
      min-height: 160px;
      padding:14px;
      border-radius:18px;
      border:1px solid var(--border);
      background: #0b1220;
      color: #e5e7eb;
      overflow:auto;
      white-space: pre-wrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      font-size: 13px;
    }

    .plot-wrap{
      border-radius:18px;
      border:1px solid var(--border);
      background: #fff;
      padding:12px;
      overflow:hidden;
    }
    .plot-title{color:var(--muted); font-size:13px; margin:0 0 10px;}
    .plot-img{
      width:100%;
      height:auto;
      display:block;
      border-radius:14px;
      border:1px solid var(--border);
      background: #fff;
    }
    .empty{
      padding:14px;
      border-radius:16px;
      border:1px dashed #cbd5e1;
      background: rgba(2,6,23,.01);
      color: var(--muted);
      font-size: 13.5px;
    }

    .grid{
      display:grid; gap:14px;
      grid-template-columns: repeat(3, 1fr);
    }
    @media (max-width: 980px){ .grid{grid-template-columns: repeat(2, 1fr)} }
    @media (max-width: 650px){ .grid{grid-template-columns: 1fr} }

    .project{
      padding:18px;
      display:flex; flex-direction:column; gap:10px;
      min-height: 210px;
      border-radius: var(--radius);
      transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease;
    }
    .project:hover{
      transform: translateY(-3px);
      border-color:#cbd5e1;
      box-shadow: 0 20px 60px rgba(2,6,23,.12);
    }
    .tagrow{display:flex; flex-wrap:wrap; gap:8px}
    .tag{
      font-size:12px;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      background: rgba(37,99,235,.06);
    }
    .project h3{
      margin:0;
      font-size:15.5px;
      letter-spacing:.1px;
      color: var(--text);
    }
    .project p{
      margin:0;
      color:var(--muted);
      font-size:13.5px;
    }
    .actions{margin-top:auto; display:flex; flex-wrap:wrap; gap:10px}
    .small{font-size:13px; padding:8px 10px; border-radius:12px}

    footer{
      margin-top:18px;
      padding:18px 0 28px;
      color:var(--muted);
      border-top:1px solid var(--border);
      font-size:13px;
    }

    .reveal{opacity:0; transform: translateY(12px); transition: opacity .6s ease, transform .6s ease;}
    .reveal.show{opacity:1; transform: translateY(0);}

    /* Recruiter Guide */
    .ai-fab{
      position: fixed;
      right: 18px;
      bottom: 18px;
      z-index: 999;
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.90);
      backdrop-filter: blur(12px);
      box-shadow: 0 18px 55px rgba(2,6,23,.10);
      cursor:pointer;
      user-select:none;
      transition: transform .14s ease, border-color .14s ease;
    }
    .ai-fab:hover{ transform: translateY(-1px); border-color:#cbd5e1; }
    .ai-dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2), var(--accent3));
      box-shadow: 0 0 0 8px rgba(37,99,235,.10);
    }
    .ai-fab span{ font-size:14px; color: var(--text); }
    .ai-fab small{ color: var(--muted); font-size:12px; display:block; margin-top:-2px; }

    .ai-panel{
      position: fixed;
      right: 18px;
      bottom: 78px;
      width: min(420px, calc(100vw - 36px));
      max-height: min(560px, calc(100vh - 120px));
      z-index: 999;
      border-radius: 18px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(14px);
      box-shadow: 0 26px 80px rgba(2,6,23,.14);
      overflow:hidden;
      transform: translateY(8px);
      opacity: 0;
      pointer-events:none;
      transition: opacity .16s ease, transform .16s ease;
    }
    .ai-panel.open{
      opacity:1;
      transform: translateY(0);
      pointer-events:auto;
    }
    .ai-header{
      padding: 12px 12px 10px;
      border-bottom:1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .ai-title{
      display:flex; align-items:center; gap:10px;
      font-weight:800;
      color: var(--text);
    }
    .ai-title .badge{
      font-size:12px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--border);
      color: var(--muted);
      background: rgba(2,6,23,.02);
      font-weight:700;
    }
    .ai-close{
      border:1px solid var(--border);
      background: #fff;
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
    }
    .ai-body{ padding: 12px; display:flex; flex-direction:column; gap:10px; }
    .ai-msg{
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid var(--border);
      background: rgba(2,6,23,.02);
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.45;
    }
    .ai-quick{display:flex; flex-wrap:wrap; gap:8px;}
    .ai-chip{
      border:1px solid var(--border);
      background: #fff;
      color: var(--text);
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 13px;
      cursor:pointer;
    }
    .ai-inputRow{display:flex; gap:10px; align-items:center; margin-top:2px;}
    .ai-input{
      border:1px solid var(--border);
      background: #fff;
      border-radius: 14px;
      padding: 10px 12px;
      color: var(--text);
      outline:none;
      font: inherit;
    }
    .ai-input.sm{ width: 110px; padding: 8px 10px; border-radius: 12px; }
    .ai-input.sel{ width: 120px; padding: 8px 10px; border-radius: 12px; }
    .ai-send{
      border:1px solid rgba(37,99,235,.35);
      background: linear-gradient(135deg, rgba(37,99,235,.12), rgba(14,165,233,.10));
      color: var(--text);
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 750;
    }
    .ai-highlight{
      outline: 2px solid rgba(37,99,235,.35);
      box-shadow: 0 0 0 7px rgba(37,99,235,.10), 0 22px 70px rgba(2,6,23,.12);
      border-radius: 18px;
      transition: outline .2s ease;
    }

    @media (prefers-reduced-motion: reduce){
      .reveal{transition:none !important;}
    }
  </style>
</head>

<body>
  <header class="nav">
    <div class="nav-inner">
      <a class="brand" href="#top" aria-label="Go to top">
        <span class="brand-dot" aria-hidden="true"></span>
        <span>Jaineel Patel</span>
      </a>
      <nav class="nav-links" aria-label="Primary">
        <a href="#python-lab">Python Lab</a>
        <a href="#projects">Projects</a>
        <a href="#about">About</a>
      </nav>
    </div>
  </header>

  <main id="top" class="container">
    <!-- HERO -->
    <section class="hero reveal">
      <div class="hero-grid">
        <div class="card card-pad">
          <h1>Quantitative Projects & Python Demos</h1>
          <p class="subhead">
            UCL MSci Mathematics student building practical quantitative finance tools in Python:
            Monte Carlo simulation, numerical methods, and research-style analysis‚Äîpresented clearly.
          </p>

          <div class="btns">
            <a class="btn primary" href="#python-lab">Open Python Lab</a>
            <a class="btn" href="#projects">View Projects</a>
            <a class="btn" href="#about">About</a>
          </div>

          <div class="chiprow">
            <span class="chip">Python (NumPy / Matplotlib)</span>
            <span class="chip">Monte Carlo & Black‚ÄìScholes</span>
            <span class="chip">Financial Markets</span>
          </div>
        </div>

        <aside class="card card-pad">
          <div class="section-title" style="margin-top:0">
            <h2>Quick scan</h2>
            <p>30 seconds</p>
          </div>
          <div class="summary-box">
            1) Python Lab ‚Üí run ‚ÄúMonte Carlo + Black‚ÄìScholes‚Äù<br/>
            2) Projects ‚Üí scan methods + outcomes<br/>
            3) About ‚Üí what I‚Äôm targeting + experience
          </div>
          <div style="height:12px"></div>
          <div class="summary-box">
            Code is <strong>view-only</strong>. Use ‚ÄúCopy code‚Äù or ‚ÄúDownload .py‚Äù.
          </div>
        </aside>
      </div>
    </section>

    <!-- PYTHON LAB -->
    <section id="python-lab" class="reveal">
      <div class="section-title">
        <h2>Python Lab</h2>
        <p>Select a demo ‚Üí run ‚Üí view output + plots. Code is view-only.</p>
      </div>

      <div class="card card-pad">
        <div class="lab">
          <div class="lab-top">
            <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
              <label class="status" for="demoSelect"><strong>Demo:</strong></label>
              <select class="select" id="demoSelect"></select>
            </div>
            <div class="btns" style="margin:0">
              <button class="btn primary" id="runBtn" type="button">Run</button>
              <button class="btn" id="copyBtn" type="button">Copy code</button>
              <button class="btn" id="downloadBtn" type="button">Download .py</button>
            </div>
          </div>

          <div class="lab-subbar">
            <div class="pill">üîí Read-only code (view & copy)</div>
            <div class="status" id="pyStatus">Loading Python runtime‚Ä¶</div>
          </div>

          <!-- Parameters bar (shown only for MC+BS demo) -->
          <div class="lab-subbar" id="mcParams" style="display:none;">
            <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
              <span class="pill">S0 <input id="pS0" class="ai-input sm" value="100" /></span>
              <span class="pill">K <input id="pK" class="ai-input sm" value="105" /></span>
              <span class="pill">r <input id="pr" class="ai-input sm" value="0.05" /></span>
              <span class="pill">œÉ <input id="pSigma" class="ai-input sm" value="0.20" /></span>
              <span class="pill">T <input id="pT" class="ai-input sm" value="1.0" /></span>
              <span class="pill">
                Type
                <select id="pType" class="ai-input sel">
                  <option value="call" selected>call</option>
                  <option value="put">put</option>
                </select>
              </span>
            </div>
            <div class="status">Edit parameters ‚Üí Run</div>
          </div>

          <div class="cm-wrap">
            <textarea id="codeArea"></textarea>
          </div>

          <div>
            <div class="status" style="margin-bottom:8px;">Output</div>
            <div class="console" id="output"></div>
          </div>

          <div class="plot-wrap">
            <p class="plot-title">Plots</p>
            <div id="plotArea" class="empty">Run a demo that produces plots to see them here.</div>
          </div>

          <div class="empty">
            Tip: if a browser blocks clipboard copy, use ‚ÄúDownload .py‚Äù.
          </div>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="reveal">
      <div class="section-title">
        <h2>Projects</h2>
        <p>Quant work with clear methodology and outputs.</p>
      </div>

      <div class="grid">
        <article class="card project">
          <div class="tagrow">
            <span class="tag">Python</span><span class="tag">Monte Carlo</span><span class="tag">Options</span>
          </div>
          <h3>Quantitative Portfolio Analysis & Monte Carlo Simulation (European Options)</h3>
          <p>
            Monte Carlo pricing for European calls/puts under GBM (risk-neutral), benchmarked to Black‚ÄìScholes.
            Convergence analysis across simulation paths and Euler time steps with error plots.
          </p>
          <div class="actions">
            <a class="btn small" href="#python-lab">Run demo</a>
            <a class="btn small" href="#" target="_blank" rel="noopener">GitHub (add)</a>
          </div>
        </article>

        <article class="card project">
          <div class="tagrow">
            <span class="tag">Equity Research</span><span class="tag">Valuation</span><span class="tag">Pitch</span>
          </div>
          <h3>Equity Research Stock Pitch (in progress)</h3>
          <p>
            Building a full stock pitch using institutional-style frameworks: modelling, valuation, and a clear investment thesis
            with recruiting-grade structure.
          </p>
          <div class="actions">
            <a class="btn small" href="#" target="_blank" rel="noopener">Write-up (add)</a>
            <a class="btn small" href="#" target="_blank" rel="noopener">Model (add)</a>
          </div>
        </article>

        <article class="card project">
          <div class="tagrow">
            <span class="tag">Systematic</span><span class="tag">Markets</span><span class="tag">Data</span>
          </div>
          <h3>Algorithmic Trading Programme (Career26 Academy)</h3>
          <p>
            Selected participant on a competitive systematic trading programme focused on strategy development and market data analysis,
            culminating in an assessed final project toward CISI-accredited certification.
          </p>
          <div class="actions">
            <a class="btn small" href="#" target="_blank" rel="noopener">Certificate (add)</a>
            <a class="btn small" href="#" target="_blank" rel="noopener">Project (add)</a>
          </div>
        </article>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="reveal">
      <div class="section-title">
        <h2>About</h2>
        <p>Short and direct.</p>
      </div>

      <div class="card card-pad">
        <p class="subhead" style="margin:0">
          I‚Äôm an MSci Mathematics student at University College London (2025‚Äìpresent), developing strong foundations in probability & statistics,
          linear algebra, multivariable calculus, and numerical methods in Python. I‚Äôm focused on quantitative finance‚Äîturning models into clean,
          testable code and communicating results clearly.
          <br/><br/>
          I‚Äôve explored markets and technology through insight experiences at Morgan Stanley (shadowing software engineering and engaging with quant/trading teams),
          UBS (asset management, wealth management, and investment banking exposure), and Premium Credit (data-driven business problem solving).
          I‚Äôm active in UCL Quant Society, Investment Society, Mathematics Society, and Hedge Fund Society, and I‚Äôm building projects in option pricing,
          convergence analysis, and equity research.
        </p>
      </div>
    </section>

    <footer class="reveal">
      <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
        <span>¬© <span id="year"></span> Jaineel Patel</span>
        <span>Hosted on GitHub Pages</span>
      </div>
    </footer>
  </main>

  <!-- Recruiter Guide -->
  <div class="ai-panel" id="aiPanel" aria-label="Recruiter guide panel">
    <div class="ai-header">
      <div class="ai-title">
        <span class="ai-dot" aria-hidden="true"></span>
        Recruiter Guide
        <span class="badge">smart nav</span>
      </div>
      <button class="ai-close" id="aiClose" type="button">Close</button>
    </div>

    <div class="ai-body">
      <div class="ai-msg" id="aiMsg">
        Ask where to find things. Try: ‚Äúpython demo‚Äù, ‚Äúprojects‚Äù, ‚Äúquick overview‚Äù, or ‚Äúmonte carlo‚Äù.
      </div>

      <div class="ai-quick">
        <button class="ai-chip" data-q="python demo" type="button">Python demo</button>
        <button class="ai-chip" data-q="projects" type="button">Projects</button>
        <button class="ai-chip" data-q="quick overview" type="button">Quick overview</button>
        <button class="ai-chip" data-q="monte carlo" type="button">Monte Carlo</button>
      </div>

      <div class="ai-inputRow">
        <input class="ai-input" id="aiInput" placeholder="Ask where to find things‚Ä¶" />
        <button class="ai-send" id="aiSend" type="button">Go</button>
      </div>

      <div class="ai-msg" id="aiResult" style="display:none;"></div>
    </div>
  </div>

  <div class="ai-fab" id="aiFab" role="button" aria-label="Open recruiter guide">
    <span class="ai-dot" aria-hidden="true"></span>
    <div>
      <span>Recruiter Guide</span>
      <small>Find sections fast</small>
    </div>
  </div>

  <!-- CodeMirror -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>

  <!-- Pyodide -->
  <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>

  <script>
    // Footer year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener("click", (e) => {
        const id = a.getAttribute("href");
        const el = document.querySelector(id);
        if (!el) return;
        e.preventDefault();
        el.scrollIntoView({ behavior: "smooth", block: "start" });
        history.pushState(null, "", id);
      });
    });

    // Scroll reveal
    const revealEls = Array.from(document.querySelectorAll(".reveal"));
    const io = new IntersectionObserver((entries) => {
      entries.forEach(en => {
        if (en.isIntersecting) {
          en.target.classList.add("show");
          io.unobserve(en.target);
        }
      });
    }, { threshold: 0.12 });
    revealEls.forEach(el => io.observe(el));

    // ===== Python demos (view-only, runnable) =====
    const MC_DEMO_ID = "mc_bs_demo";

    const PY_DEMOS = [
      {
        name: "Hello + math",
        filename: "hello_math.py",
        code:
`print("Hello from Python in your browser!")\n\nimport math\nx = 2\nprint("sqrt(2) =", math.sqrt(x))`
      },
      {
        name: "Prime checker",
        filename: "prime_checker.py",
        code:
`def is_prime(n):\n    if n < 2:\n        return False\n    if n % 2 == 0:\n        return n == 2\n    i = 3\n    while i*i <= n:\n        if n % i == 0:\n            return False\n        i += 2\n    return True\n\nfor n in range(1, 31):\n    if is_prime(n):\n        print(n, "is prime")`
      },
      {
        name: "Monte Carlo œÄ",
        filename: "mc_pi.py",
        code:
`import random\n\nN = 25000\ninside = 0\nfor _ in range(N):\n    x = random.random()\n    y = random.random()\n    if x*x + y*y <= 1:\n        inside += 1\n\npi_est = 4 * inside / N\nprint("Estimated pi:", pi_est)\nprint("Samples:", N)`
      },
      {
        id: MC_DEMO_ID,
        name: "Monte Carlo + Black‚ÄìScholes (Convergence + Plots)",
        filename: "mc_bs_convergence_pyodide.py",
        code:
`# Quantitative Portfolio Analysis & Monte Carlo Simulation (European Options)\n# Browser version (Pyodide): parameters are injected from the webpage.\n\nimport math\nimport base64\nfrom io import BytesIO\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Parameters injected by JS (strings), converted safely here:\nS0 = float(__S0__)\nK = float(__K__)\nr = float(__R__)\nsigma = float(__SIGMA__)\nT = float(__T__)\noption_type = str(__TYPE__).strip().lower()\n\nif option_type not in {\"call\", \"put\"}:\n    raise ValueError(\"option_type must be 'call' or 'put'.\")\nif S0 <= 0 or K <= 0:\n    raise ValueError(\"S0 and K must be > 0.\")\nif sigma < 0:\n    raise ValueError(\"sigma must be >= 0.\")\nif T < 0:\n    raise ValueError(\"T must be >= 0.\")\n\n\ndef emit_plot(fig, title_hint=\"plot\"):\n    \"\"\"Save figure to PNG and print a marker line the webpage converts into an image.\"\"\"\n    buf = BytesIO()\n    fig.savefig(buf, format=\"png\", dpi=150, bbox_inches=\"tight\")\n    plt.close(fig)\n    b64 = base64.b64encode(buf.getvalue()).decode(\"ascii\")\n    print(f\"__PLOT__:{title_hint}:{b64}\")\n\n\ndef norm_cdf(x):\n    return 0.5 * (1.0 + math.erf(x / math.sqrt(2.0)))\n\n\ndef black_scholes_price(S0, K, r, sigma, T, option_type=\"call\"):\n    option_type = option_type.lower().strip()\n\n    if T == 0:\n        return max(S0 - K, 0.0) if option_type == \"call\" else max(K - S0, 0.0)\n\n    if sigma == 0:\n        ST_det = S0 * math.exp(r * T)\n        payoff = max(ST_det - K, 0.0) if option_type == \"call\" else max(K - ST_det, 0.0)\n        return math.exp(-r * T) * payoff\n\n    d1 = (math.log(S0 / K) + (r + 0.5 * sigma**2) * T) / (sigma * math.sqrt(T))\n    d2 = d1 - sigma * math.sqrt(T)\n\n    if option_type == \"call\":\n        return S0 * norm_cdf(d1) - K * math.exp(-r * T) * norm_cdf(d2)\n    else:\n        return K * math.exp(-r * T) * norm_cdf(-d2) - S0 * norm_cdf(-d1)\n\n\ndef mc_price_one_step(S0, K, r, sigma, T, n_paths, option_type=\"call\", seed=0):\n    rng = np.random.default_rng(seed)\n\n    if T == 0:\n        payoff = max(S0 - K, 0.0) if option_type == \"call\" else max(K - S0, 0.0)\n        return float(payoff)\n\n    Z = rng.standard_normal(n_paths)\n    ST = S0 * np.exp((r - 0.5 * sigma**2) * T + sigma * math.sqrt(T) * Z)\n\n    payoffs = np.maximum(ST - K, 0.0) if option_type == \"call\" else np.maximum(K - ST, 0.0)\n    return float(math.exp(-r * T) * payoffs.mean())\n\n\ndef mc_price_euler_paths(S0, K, r, sigma, T, n_paths, n_steps, option_type=\"call\", seed=0):\n    rng = np.random.default_rng(seed)\n\n    if T == 0:\n        payoff = max(S0 - K, 0.0) if option_type == \"call\" else max(K - S0, 0.0)\n        return float(payoff)\n\n    dt = T / n_steps\n    sqrt_dt = math.sqrt(dt)\n    S = np.full(n_paths, S0, dtype=float)\n\n    for _ in range(n_steps):\n        Z = rng.standard_normal(n_paths)\n        S = S + r * S * dt + sigma * S * sqrt_dt * Z\n        S = np.maximum(S, 0.0)\n\n    payoffs = np.maximum(S - K, 0.0) if option_type == \"call\" else np.maximum(K - S, 0.0)\n    return float(math.exp(-r * T) * payoffs.mean())\n\n\ndef plot_error_loglog(x, y, xlabel, title, hint):\n    fig = plt.figure()\n    plt.plot(x, y, marker=\"o\")\n    plt.xscale(\"log\")\n    plt.yscale(\"log\")\n    plt.xlabel(xlabel)\n    plt.ylabel(\"Absolute error |MC - BS| (log scale)\")\n    plt.title(title)\n    plt.grid(True, which=\"both\", linestyle=\"--\", linewidth=0.6)\n    emit_plot(fig, hint)\n\n\ndef plot_prices(x, mc_prices, bs_price, xlabel, title, hint):\n    fig = plt.figure()\n    plt.plot(x, mc_prices, marker=\"o\", label=\"Monte Carlo\")\n    plt.axhline(bs_price, linestyle=\"--\", label=\"Black‚ÄìScholes\")\n    plt.xscale(\"log\")\n    plt.xlabel(xlabel)\n    plt.ylabel(\"Option price\")\n    plt.title(title)\n    plt.grid(True, which=\"both\", linestyle=\"--\", linewidth=0.6)\n    plt.legend()\n    emit_plot(fig, hint)\n\n\nprint(\"=== Inputs ===\")\nprint(f\"S0={S0}, K={K}, r={r}, sigma={sigma}, T={T}, option_type={option_type}\")\n\nbs = black_scholes_price(S0, K, r, sigma, T, option_type=option_type)\nprint(\"\\n=== Black‚ÄìScholes Benchmark ===\")\nprint(f\"BS price: {bs:.6f}\")\n\n# Convergence vs paths\npath_list = [1_000, 2_000, 5_000, 10_000, 20_000, 50_000, 100_000]\nmc_prices_p = []\nabs_err_p = []\n\nfor n in path_list:\n    mc = mc_price_one_step(S0, K, r, sigma, T, n, option_type=option_type, seed=123)\n    mc_prices_p.append(mc)\n    abs_err_p.append(abs(mc - bs))\n\nprint(\"\\n=== Convergence vs number of paths (one-step) ===\")\nfor n, price, err in zip(path_list, mc_prices_p, abs_err_p):\n    print(f\"Paths={n:>7} | MC={price:.6f} | abs error={err:.6f}\")\n\nplot_prices(path_list, mc_prices_p, bs,\n            xlabel=\"Number of paths (log scale)\",\n            title=f\"MC Price vs Paths ({option_type})\",\n            hint=\"price_vs_paths\")\nplot_error_loglog(path_list, abs_err_p,\n                  xlabel=\"Number of paths (log scale)\",\n                  title=f\"MC Error vs Paths ({option_type})\",\n                  hint=\"error_vs_paths\")\n\n# Convergence vs steps (Euler)\nstep_list = [1, 2, 5, 10, 20, 50, 100, 200]\nmc_prices_t = []\nabs_err_t = []\n\nn_paths_fixed = 60_000\nfor m in step_list:\n    mc = mc_price_euler_paths(S0, K, r, sigma, T, n_paths_fixed, m, option_type=option_type, seed=123)\n    mc_prices_t.append(mc)\n    abs_err_t.append(abs(mc - bs))\n\nprint(\"\\n=== Convergence vs time steps (Euler; fixed paths) ===\")\nprint(f\"Fixed paths: {n_paths_fixed}\")\nfor m, price, err in zip(step_list, mc_prices_t, abs_err_t):\n    print(f\"Steps={m:>4} | MC={price:.6f} | abs error={err:.6f}\")\n\nplot_prices(step_list, mc_prices_t, bs,\n            xlabel=\"Number of time steps (log scale)\",\n            title=f\"MC Price vs Time Steps (Euler; {option_type})\",\n            hint=\"price_vs_steps\")\nplot_error_loglog(step_list, abs_err_t,\n                  xlabel=\"Number of time steps (log scale)\",\n                  title=f\"MC Error vs Time Steps (Euler; {option_type})\",\n                  hint=\"error_vs_steps\")\n\nprint(\"\\nDone.\")\n`
      }
    ];

    // Populate demo dropdown
    const demoSelect = document.getElementById("demoSelect");
    PY_DEMOS.forEach((d, idx) => {
      const opt = document.createElement("option");
      opt.value = String(idx);
      opt.textContent = d.name;
      demoSelect.appendChild(opt);
    });

    // CodeMirror (READ-ONLY)
    const editor = CodeMirror.fromTextArea(document.getElementById("codeArea"), {
      mode: "python",
      theme: "dracula",
      lineNumbers: true,
      indentUnit: 4,
      tabSize: 4,
      indentWithTabs: false,
      lineWrapping: true,
      readOnly: "nocursor"
    });

    let currentIdx = 0;
    editor.setValue(PY_DEMOS[currentIdx].code);

    const mcParamsBar = document.getElementById("mcParams");

    function isMcDemo(idx){
      return PY_DEMOS[idx] && PY_DEMOS[idx].id === MC_DEMO_ID;
    }

    function setMcParamsVisible(visible){
      mcParamsBar.style.display = visible ? "flex" : "none";
    }

    demoSelect.addEventListener("change", () => {
      currentIdx = Number(demoSelect.value);
      editor.setValue(PY_DEMOS[currentIdx].code);
      document.getElementById("output").textContent = "";
      clearPlots();
      setMcParamsVisible(isMcDemo(currentIdx));
    });

    // show/hide params initially
    setMcParamsVisible(isMcDemo(currentIdx));

    // Copy code
    document.getElementById("copyBtn").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(editor.getValue());
        toast("Copied ‚úÖ");
      } catch {
        toast("Copy blocked by browser");
      }
    });

    // Download .py
    document.getElementById("downloadBtn").addEventListener("click", () => {
      const demo = PY_DEMOS[currentIdx];
      const blob = new Blob([editor.getValue()], { type: "text/x-python;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = demo.filename || "demo.py";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    // Toast
    let toastTimer = null;
    function toast(msg){
      let el = document.getElementById("toast");
      if (!el){
        el = document.createElement("div");
        el.id = "toast";
        el.style.position = "fixed";
        el.style.left = "50%";
        el.style.bottom = "22px";
        el.style.transform = "translateX(-50%)";
        el.style.padding = "10px 12px";
        el.style.borderRadius = "999px";
        el.style.border = "1px solid var(--border)";
        el.style.background = "rgba(255,255,255,.92)";
        el.style.backdropFilter = "blur(12px)";
        el.style.boxShadow = "0 18px 55px rgba(2,6,23,.10)";
        el.style.color = "var(--text)";
        el.style.fontSize = "13px";
        el.style.zIndex = "2000";
        el.style.opacity = "0";
        el.style.transition = "opacity .16s ease, transform .16s ease";
        document.body.appendChild(el);
      }
      el.textContent = msg;
      el.style.opacity = "1";
      el.style.transform = "translateX(-50%) translateY(-2px)";
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => {
        el.style.opacity = "0";
        el.style.transform = "translateX(-50%) translateY(6px)";
      }, 1100);
    }

    // Plot area helpers
    const plotArea = document.getElementById("plotArea");
    function clearPlots(){
      plotArea.innerHTML = "";
      plotArea.classList.add("empty");
      plotArea.textContent = "Run a demo that produces plots to see them here.";
    }
    function showPlots(plotItems){
      plotArea.classList.remove("empty");
      plotArea.innerHTML = "";
      if (!plotItems.length){
        plotArea.classList.add("empty");
        plotArea.textContent = "No plots produced for this run.";
        return;
      }
      plotItems.forEach((p) => {
        const wrap = document.createElement("div");
        wrap.style.marginBottom = "12px";

        const cap = document.createElement("div");
        cap.className = "status";
        cap.style.marginBottom = "8px";
        cap.textContent = p.hint || "plot";

        const img = document.createElement("img");
        img.className = "plot-img";
        img.alt = p.hint || "plot";
        img.src = `data:image/png;base64,${p.b64}`;

        wrap.appendChild(cap);
        wrap.appendChild(img);
        plotArea.appendChild(wrap);
      });
    }

    // Read MC params
    function readMcParams(){
      const S0 = document.getElementById("pS0").value.trim();
      const K = document.getElementById("pK").value.trim();
      const r = document.getElementById("pr").value.trim();
      const sigma = document.getElementById("pSigma").value.trim();
      const T = document.getElementById("pT").value.trim();
      const type = document.getElementById("pType").value.trim();

      // minimal sanity check here (Python will validate too)
      const nums = {S0, K, r, sigma, T};
      for (const [k,v] of Object.entries(nums)){
        if (v === "" || !isFinite(Number(v))) {
          throw new Error(`Invalid ${k}: please enter a number.`);
        }
      }
      return { S0, K, r, sigma, T, type };
    }

    function injectMcParams(code){
      const p = readMcParams();

      // Replace placeholders with Python literals.
      // Use JSON.stringify so strings are safely quoted.
      return code
        .replaceAll("__S0__", JSON.stringify(p.S0))
        .replaceAll("__K__", JSON.stringify(p.K))
        .replaceAll("__R__", JSON.stringify(p.r))
        .replaceAll("__SIGMA__", JSON.stringify(p.sigma))
        .replaceAll("__T__", JSON.stringify(p.T))
        .replaceAll("__TYPE__", JSON.stringify(p.type));
    }

    // Load Pyodide + packages
    const statusEl = document.getElementById("pyStatus");
    let pyodideReady = (async () => {
      statusEl.textContent = "Loading Python runtime‚Ä¶";
      const pyodide = await loadPyodide();

      statusEl.textContent = "Loading scientific packages‚Ä¶";
      await pyodide.loadPackage(["numpy", "matplotlib"]);

      statusEl.textContent = "Python ready ‚úÖ";
      return pyodide;
    })();

    // Run Python
    document.getElementById("runBtn").addEventListener("click", async () => {
      const runBtn = document.getElementById("runBtn");
      const output = document.getElementById("output");
      runBtn.disabled = true;
      runBtn.textContent = "Running‚Ä¶";
      output.textContent = "";
      clearPlots();

      try {
        const pyodide = await pyodideReady;

        let code = editor.getValue();

        // If MC demo, inject parameters from webpage inputs
        if (isMcDemo(currentIdx)) {
          code = injectMcParams(code);
        }

        const wrapped = `
import sys, io, traceback
_buf_out = io.StringIO()
_buf_err = io.StringIO()
_old_out, _old_err = sys.stdout, sys.stderr
sys.stdout, sys.stderr = _buf_out, _buf_err
try:
${code.split("\\n").map(l => "    " + l).join("\\n")}
except Exception:
    traceback.print_exc()
finally:
    sys.stdout, sys.stderr = _old_out, _old_err
_result = _buf_out.getvalue() + _buf_err.getvalue()
`;
        await pyodide.runPythonAsync(wrapped);
        const result = pyodide.globals.get("_result") || "";
        const text = String(result);

        // Parse plot markers: "__PLOT__:<hint>:<base64>"
        const lines = text.split(/\\r?\\n/);
        const plotItems = [];
        const keptLines = [];

        for (const line of lines){
          if (line.startsWith("__PLOT__:")){
            const rest = line.slice("__PLOT__:".length);
            const firstColon = rest.indexOf(":");
            if (firstColon > -1){
              const hint = rest.slice(0, firstColon);
              const b64 = rest.slice(firstColon + 1);
              if (b64 && b64.length > 100) plotItems.push({ hint, b64 });
            }
          } else {
            keptLines.push(line);
          }
        }

        const cleaned = keptLines.join("\n").trim();
        output.textContent = cleaned.length ? cleaned : "(no output)";
        showPlots(plotItems);

      } catch (err) {
        output.textContent = String(err);
        plotArea.classList.add("empty");
        plotArea.textContent = "Plot rendering failed for this run.";
      } finally {
        runBtn.disabled = false;
        runBtn.textContent = "Run";
      }
    });

    // ===== Recruiter Guide (smart navigation) =====
    const aiFab = document.getElementById("aiFab");
    const aiPanel = document.getElementById("aiPanel");
    const aiClose = document.getElementById("aiClose");
    const aiInput = document.getElementById("aiInput");
    const aiSend = document.getElementById("aiSend");
    const aiResult = document.getElementById("aiResult");

    function openAI(){ aiPanel.classList.add("open"); setTimeout(()=>aiInput.focus(), 80); }
    function closeAI(){ aiPanel.classList.remove("open"); }
    aiFab.addEventListener("click", openAI);
    aiClose.addEventListener("click", closeAI);

    const ROUTES = [
      { keys: ["python", "demo", "run", "lab", "code"], target: "#python-lab", msg: "Opening Python Lab ‚Äî run a demo and view plots." },
      { keys: ["project", "projects", "portfolio", "work"], target: "#projects", msg: "Taking you to Projects ‚Äî scan methods + outcomes." },
      { keys: ["about", "overview", "summary"], target: "#about", msg: "Opening About ‚Äî background and interests." },
      { keys: ["monte", "black", "scholes", "options", "convergence"], target: "#python-lab", msg: "Go to Python Lab ‚Üí select the Monte Carlo + Black‚ÄìScholes demo ‚Üí edit parameters ‚Üí Run." },
    ];

    function normalize(s){ return (s || "").toLowerCase().trim(); }

    function bestRoute(query){
      const q = normalize(query);
      if (!q) return null;
      let best = null, bestScore = 0;
      for (const r of ROUTES){
        let score = 0;
        for (const k of r.keys) if (q.includes(k)) score += 1;
        if (score > bestScore){ bestScore = score; best = r; }
      }
      return bestScore > 0 ? best : null;
    }

    function highlightSection(el){
      document.querySelectorAll(".ai-highlight").forEach(x => x.classList.remove("ai-highlight"));
      el.classList.add("ai-highlight");
      setTimeout(()=> el.classList.remove("ai-highlight"), 1600);
    }

    function goTo(target, message){
      const el = document.querySelector(target);
      if (!el){
        aiResult.style.display = "block";
        aiResult.textContent = `I couldn't find ${target} on this page yet.`;
        return;
      }
      el.scrollIntoView({ behavior: "smooth", block: "start" });
      highlightSection(el);
      aiResult.style.display = "block";
      aiResult.textContent = message;
    }

    function handleAsk(text){
      const route = bestRoute(text);
      if (!route){
        aiResult.style.display = "block";
        aiResult.textContent = "Try: ‚Äúpython demo‚Äù, ‚Äúprojects‚Äù, ‚Äúabout‚Äù, or ‚Äúmonte carlo‚Äù.";
        return;
      }
      goTo(route.target, route.msg);
    }

    aiSend.addEventListener("click", () => handleAsk(aiInput.value));
    aiInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") handleAsk(aiInput.value);
      if (e.key === "Escape") closeAI();
    });

    document.querySelectorAll(".ai-chip").forEach(btn => {
      btn.addEventListener("click", () => {
        const q = btn.getAttribute("data-q");
        aiInput.value = q;
        handleAsk(q);
      });
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "?" && !aiPanel.classList.contains("open")) openAI();
    });
  </script>
</body>
</html>
